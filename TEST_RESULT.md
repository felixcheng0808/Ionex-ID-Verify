# 測試結果報告

## 測試時間
2025-11-08

## 測試圖片
台灣身分證正面照片

## 測試結果

### ❌ Tesseract.js 辨識效果不佳

**OCR 引擎**: Tesseract.js 6.0.1 + chi_tra (繁體中文)

**辨識結果**:
```
0
ANY
基 11041 月 14 日 1
1
r 7
一 二 2
NO
0
```

**預期結果**:
- 姓名: 鄭遠星
- 身分證字號: I122347001
- 出生日期: 民國74年9月21日
- 性別: 男
- 發證日期: 民國110年1月14日(竹縣)換發

### 問題分析

1. **辨識準確度極低** (約 5%)
   - 只辨識出少數數字和零散中文字
   - 無法辨識出完整的姓名
   - 無法辨識出完整的身分證字號

2. **可能原因**:
   - Tesseract.js 的繁體中文模型訓練不足
   - 身分證的特殊字體和排版不適合 Tesseract
   - 圖片中有複雜的背景圖案干擾
   - 塑膠卡片的反光影響辨識

3. **圖片預處理嘗試**:
   - ✅ 已測試灰階轉換
   - ✅ 已測試二值化 (threshold)
   - ✅ 已測試放大至 3000x3000
   - ✅ 已測試 PNG 無損格式
   - ❌ 效果仍然不理想

## 建議解決方案

### 選項 1: 升級到商業 OCR 服務 (推薦)

**Google Cloud Vision API**
- 準確度: 95%+
- 成本: 前 1000 次/月免費
- 實施難度: 低
- 修改位置: `src/services/ocrService.js`

**Azure Computer Vision**
- 準確度: 95%+
- 成本: 前 5000 次/月免費
- 實施難度: 低

**AWS Textract**
- 準確度: 95%+
- 專為文件辨識設計
- 實施難度: 中

### 選項 2: 使用專門的身分證辨識 API

國內廠商提供的身分證辨識服務：
- 中華電信 HiOCR
- 訊力科技
- 趨勢科技

### 選項 3: 改進當前方案

如果堅持使用免費方案，可以嘗試：

1. **換用 Tesseract 4.x + 自訓練模型**
   - 使用台灣身分證樣本訓練專用模型
   - 需要大量樣本和訓練時間

2. **使用 PaddleOCR**
   - 中文辨識效果更好
   - 需要 Python 環境
   - 可透過 Node.js 調用

3. **混合方案**
   - 使用 OpenCV 進行更進階的圖片預處理
   - 手動分割身分證區域再個別辨識
   - 使用規則引擎輔助修正辨識錯誤

## 當前系統狀態

### ✅ 已完成功能
- 圖片上傳功能
- 圖片 URL 下載功能
- 圖片預處理流程
- OCR 引擎整合
- 身分證資訊解析邏輯
- API 端點設計
- 錯誤處理機制

### ❌ 主要限制
- Tesseract.js 繁體中文辨識準確度不足
- 無法穩定辨識台灣身分證

## 後續行動建議

### 短期 (立即可執行)
1. 在 README 中標註 Tesseract.js 的限制
2. 提供升級到 Google Vision API 的說明文件
3. 提供替代方案選項給使用者

### 中期 (1-2週)
1. 實作 Google Cloud Vision API 整合
2. 提供兩種模式切換 (Tesseract / Google Vision)
3. 增加更多圖片預處理選項

### 長期 (1個月+)
1. 評估訓練專用 Tesseract 模型
2. 研究 PaddleOCR 整合方案
3. 建立測試圖片集合和準確度基準

## 結論

**當前系統架構完整，但 Tesseract.js 的繁體中文辨識能力無法滿足實際需求。**

建議：
- 🔴 **不建議**直接用於生產環境
- 🟡 **可用於**概念驗證或學習用途
- 🟢 **推薦**升級到商業 OCR API

---

## 測試環境

- Node.js: v20+
- Tesseract.js: 6.0.1
- 語言包: chi_tra (繁體中文)
- 圖片格式: JPG
- 圖片尺寸: 3024 x 4032
- 預處理: 灰階 + 二值化 + 放大至 3000x3000
